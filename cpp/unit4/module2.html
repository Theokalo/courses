<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Ενότητα 4-2 &mdash; C++ Lectures v1.0 documentation</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="C++ Lectures v1.0 documentation" href="../index.html" />
    <link rel="next" title="Ενότητα 5-1" href="../unit5/module1.html" />
    <link rel="prev" title="Ενότητα 4-1" href="module1.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../unit5/module1.html" title="Ενότητα 5-1"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="module1.html" title="Ενότητα 4-1"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">C++ Lectures v1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="document">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="id1">
<h1>Ενότητα 4-2<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id2">
<h2>Στατικές μεταβλητές-μέλη κλάσης<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>Κάθε αντικείμενο μιας κλάσης διαθέτει τις δικές του μεταβλητές, οι οποίες είναι εντελώς διαφορετικές από εκείνες κάθε άλλου αντικειμένου της ίδιας κλάσης. Σε ορισμένες περιπτώσεις όμως είναι βολικό να έχουμε <strong>μία και μοναδική</strong> μεταβλητή <strong>για όλα τα αντικείμενα</strong> της κλάσης. Η μεταβλητή αυτή εννοιολογικά &quot;ανήκει στην κλάση&quot;. Αυτό επιτυγχάνεται δηλώνοντας μια μεταβλητή μέλος ως static, όπως η μεταβλητή k της κλάσης Test του παραδείγματος:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="cp">#include &lt;iostream&gt;</span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Test</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
<span class="k">public</span><span class="o">:</span>
  <span class="n">Test</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">);</span>
  <span class="kt">int</span> <span class="n">get_i</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">i</span><span class="p">;</span> <span class="p">}</span>
  <span class="k">static</span> <span class="kt">int</span> <span class="n">k</span><span class="p">;</span> 
<span class="p">};</span>

<span class="n">Test</span><span class="o">::</span><span class="n">Test</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">)</span><span class="o">:</span> <span class="n">i</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="p">{</span>

<span class="p">}</span>

<span class="kt">int</span> <span class="n">Test</span><span class="o">::</span><span class="n">k</span> <span class="o">=</span> <span class="mi">99</span><span class="p">;</span>


<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">Test</span> <span class="n">ob1</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
  <span class="n">Test</span> <span class="n">ob2</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>

  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">ob1</span><span class="p">.</span><span class="n">k</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>	<span class="c1">// 99</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">ob2</span><span class="p">.</span><span class="n">k</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>	<span class="c1">// 99</span>
  <span class="o">++</span><span class="n">ob1</span><span class="p">.</span><span class="n">k</span><span class="p">;</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">ob1</span><span class="p">.</span><span class="n">k</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>	<span class="c1">// 100</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">ob2</span><span class="p">.</span><span class="n">k</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>	<span class="c1">// 100</span>
  <span class="n">Test</span><span class="o">::</span><span class="n">k</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">ob1</span><span class="p">.</span><span class="n">k</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>	<span class="c1">// 1000</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">ob2</span><span class="p">.</span><span class="n">k</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>	<span class="c1">// 1000</span>
  
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Παρατηρήστε ότι:</p>
<ul class="simple">
<li>Η μεταβλητή static δηλώνεται μέσα στην κλάση.</li>
<li>Ορίζεται και αρχικοποιείται ξεχωριστά.</li>
<li>Μπορείτε να την προσπελάσετε (αν είναι public φυσικά) έξω από την κλάση ως object.varname ή Class::varname.</li>
</ul>
</div>
<div class="section" id="id3">
<h2>Κληρονομικότητα - βασικές οδηγίες<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>Στη C++ μια κλάση μπορεί να οριστεί ως απόγονος μιας κλάσης-βάσης, όπως η Child ως προς την Test:</p>
<div class="highlight-c++"><div class="highlight"><pre> <span class="k">class</span> <span class="nc">Test</span> <span class="p">{</span>
 <span class="k">public</span><span class="o">:</span>
   <span class="kt">int</span> <span class="n">pbi</span><span class="p">;</span>
   <span class="n">Test</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span><span class="kt">int</span><span class="p">,</span><span class="kt">int</span><span class="p">);</span>
 <span class="k">protected</span><span class="o">:</span>
   <span class="kt">int</span> <span class="n">pri</span><span class="p">;</span>
 <span class="k">private</span><span class="o">:</span>
   <span class="kt">int</span> <span class="n">pvi</span><span class="p">;</span>
 <span class="p">};</span>

 <span class="k">class</span> <span class="nc">Child</span><span class="o">:</span> <span class="k">public</span> <span class="n">Test</span> <span class="p">{</span>
 <span class="k">public</span><span class="o">:</span>
   <span class="n">Child</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span><span class="kt">int</span><span class="p">,</span><span class="kt">int</span><span class="p">);</span>        <span class="c1">// used for the benefit of Test constructor</span>
   <span class="kt">void</span> <span class="n">printSth</span><span class="p">();</span>
<span class="p">};</span>
</pre></div>
</div>
<ul class="simple">
<li>Όταν δημιουργείται ένα αντικείμενο της κλάσης Child, κληρονομεί όλα τα μέλη της κλάσης Test.</li>
<li>Ο κώδικας του Child μπορεί να προσπελάσει τα public και protected μέλη της Test, <strong>όχι όμως και τα private</strong>.</li>
<li>H C++ στη δημιουργία του αντικειμένου Child θα καλέσει πρώτα τον constructor της Test και μετά του Child.</li>
</ul>
<p>Παρόλο που το Child του παραδείγματος δεν έχει μεταβλητές μέλη, χρειάζεται έναν constructor για να προμηθεύει τιμές στον constructor της Test! Το πέρασμα των παραμέτρων στον constructor της κλάσης βάσης Test γίνεται παρόμοια με την αρχικοποίηση των μεταβλητών.</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="n">Test</span><span class="o">::</span><span class="n">Test</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span><span class="kt">int</span> <span class="n">j</span><span class="p">,</span><span class="kt">int</span> <span class="n">k</span><span class="p">)</span><span class="o">:</span> <span class="n">pbi</span><span class="p">(</span><span class="n">i</span><span class="p">),</span><span class="n">pri</span><span class="p">(</span><span class="n">j</span><span class="p">),</span><span class="n">pvi</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="p">{</span>

<span class="p">}</span>

<span class="n">Child</span><span class="o">::</span><span class="n">Child</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span><span class="kt">int</span> <span class="n">j</span><span class="p">,</span><span class="kt">int</span> <span class="n">k</span><span class="p">)</span><span class="o">:</span> <span class="n">Test</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// pass parameters to base constructor</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Στη δήλωση class Child: public Test η λέξη κλειδί public μπορεί να αντικατασταθεί με τα protected και private, καθορίζοντας πώς οι τρίτοι (όχι η Child!) θα βλέπουν τα μέλη της Child.</p>
<ul class="simple">
<li>Η δήλωση class Child: public Test σημαίνει ότι τα public (protected)  μέλη της Test θα είναι public (protected) στην Child.</li>
<li>Η δήλωση class Child: protected Test σημαίνει ότι τα public (protected)  μέλη της Test θα είναι protected (protected) στην Child.</li>
<li>Η δήλωση class Child: private Test σημαίνει ότι τα public (protected)  μέλη της Test θα είναι private (private) στην Child.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Στις απλές περιπτώσεις αρκεί το public, όπως στο class Child: public Test.</p>
</div>
</div>
<div class="section" id="id4">
<h2>Ένα απλό παράδειγμα<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>Για τη χρήση αντικειμένων κλάσης ως &quot;εγγραφές&quot; (records) με τα στοιχεία εργαζομένων (employees).</p>
<p>(<a href="../_downloads/simpleclass0.cpp"><strong class="xref">πηγαίος κώδικας</strong></a>)</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="cp">#include &lt;iostream&gt;</span>
<span class="cp">#include &lt;string&gt;</span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Employee</span> <span class="p">{</span>
  <span class="n">string</span> <span class="n">firstname</span><span class="p">;</span>
  <span class="n">string</span> <span class="n">lastname</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">age</span><span class="p">;</span>
  <span class="kt">double</span> <span class="n">salary</span><span class="p">;</span>
<span class="k">public</span><span class="o">:</span>
  <span class="n">Employee</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="n">fs</span><span class="p">,</span><span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="n">ls</span><span class="p">,</span><span class="kt">int</span> <span class="n">ag</span><span class="p">,</span><span class="kt">double</span> <span class="n">sal</span><span class="p">);</span>
  <span class="n">string</span> <span class="n">get_firstname</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">firstname</span><span class="p">;</span> <span class="p">}</span>
  <span class="n">string</span> <span class="n">get_lastname</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">lastname</span><span class="p">;</span> <span class="p">}</span>
  <span class="kt">int</span> <span class="n">get_age</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">age</span><span class="p">;</span> <span class="p">}</span>
  <span class="kt">double</span> <span class="n">get_salary</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">salary</span><span class="p">;</span> <span class="p">}</span> 

  <span class="k">friend</span> <span class="n">ostream</span> <span class="o">&amp;</span><span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">ostream</span> <span class="o">&amp;</span><span class="n">stream</span><span class="p">,</span><span class="k">const</span> <span class="n">Employee</span> <span class="o">&amp;</span><span class="n">empl</span><span class="p">);</span>
<span class="p">};</span>

<span class="n">Employee</span><span class="o">::</span><span class="n">Employee</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="n">fs</span><span class="p">,</span><span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="n">ls</span><span class="p">,</span><span class="kt">int</span> <span class="n">ag</span><span class="p">,</span><span class="kt">double</span> <span class="n">sal</span><span class="p">)</span><span class="o">:</span> <span class="n">firstname</span><span class="p">(</span><span class="n">fs</span><span class="p">),</span><span class="n">lastname</span><span class="p">(</span><span class="n">ls</span><span class="p">),</span><span class="n">age</span><span class="p">(</span><span class="n">ag</span><span class="p">),</span><span class="n">salary</span><span class="p">(</span><span class="n">sal</span><span class="p">)</span> <span class="p">{</span>

<span class="p">}</span>

<span class="n">ostream</span> <span class="o">&amp;</span><span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">ostream</span> <span class="o">&amp;</span><span class="n">stream</span><span class="p">,</span><span class="k">const</span> <span class="n">Employee</span> <span class="o">&amp;</span><span class="n">empl</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// function must be declared friend of Employee for the following to work!</span>
  <span class="n">stream</span> <span class="o">&lt;&lt;</span> <span class="n">empl</span><span class="p">.</span><span class="n">firstname</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">empl</span><span class="p">.</span><span class="n">lastname</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;,&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">empl</span><span class="p">.</span><span class="n">age</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;-&gt;&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">empl</span><span class="p">.</span><span class="n">salary</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">stream</span><span class="p">;</span>	<span class="c1">// this must be returned, in order to work with concatenated &lt;&lt;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">Employee</span> <span class="n">empl</span><span class="p">(</span><span class="s">&quot;John&quot;</span><span class="p">,</span><span class="s">&quot;Doe&quot;</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mf">12.98</span><span class="p">);</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">empl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Στο παράδειγμα αυτό:</p>
<ul>
<li><p class="first">Ο constructor δηλώνεται ως</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="n">Employee</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="n">fs</span><span class="p">,</span><span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="n">ls</span><span class="p">,</span><span class="kt">int</span> <span class="n">ag</span><span class="p">,</span><span class="kt">double</span> <span class="n">sal</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Στον κώδικα του constructor δεν ελέγχονται οι παράμετροι εισόδου: τίποτα δεν εμποδίζει το age να είναι 0 ή το salary αρνητικό. Αυτό δεν είναι επιτρεπτό σε μια κανονική εφαρμογή!</p>
</div>
</li>
<li><p class="first">Παρέχονται getters για την προσπέλαση των private μεταβλητών firstname, lastname, age και salary</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="n">string</span> <span class="n">get_firstname</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">firstname</span><span class="p">;</span> <span class="p">}</span>
<span class="n">string</span> <span class="n">get_lastname</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">lastname</span><span class="p">;</span> <span class="p">}</span>
<span class="kt">int</span> <span class="n">get_age</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">age</span><span class="p">;</span> <span class="p">}</span>
<span class="kt">double</span> <span class="n">get_salary</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">salary</span><span class="p">;</span> <span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">Μέσω της υπερφόρτωσης του τελεστή &lt;&lt;</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="n">ostream</span> <span class="o">&amp;</span><span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">ostream</span> <span class="o">&amp;</span><span class="n">stream</span><span class="p">,</span><span class="k">const</span> <span class="n">Employee</span> <span class="o">&amp;</span><span class="n">empl</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// function must be declared friend of Employee for the following to work!</span>
  <span class="n">stream</span> <span class="o">&lt;&lt;</span> <span class="n">empl</span><span class="p">.</span><span class="n">firstname</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">empl</span><span class="p">.</span><span class="n">lastname</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;,&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">empl</span><span class="p">.</span><span class="n">age</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;-&gt;&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">empl</span><span class="p">.</span><span class="n">salary</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">stream</span><span class="p">;</span>   <span class="c1">// this must be returned, in order to work with concatenated &lt;&lt;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>μπορούμε να γράψουμε:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">empl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Η υπερφόρτωση τελεστών δεν έχει αναφερθεί ακόμα, προς το παρόν παρατηρήστε πώς υλοποιείται μέσω συνάρτησης <strong>friend</strong> της κλάσης Employee (συνάρτηση που δεν ανήκει στην κλάση κι όμως έχει δικαίωμα προσπέλασης ακόμα και στα private μέλη της κλάσης).</p>
</div>
</li>
</ul>
<p>Για κάθε μη τετριμμένο παράδειγμα κώδικα με κλάσεις, η σωστή υλοποίηση πρέπει να τοποθετεί τη δήλωση και τον κώδικα της κλάσης <strong>σε ξεχωριστά από το main() αρχεία</strong>. Με την τεχνική αυτή θα ασχοληθούμε στη συνέχεια.</p>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../unit5/module1.html" title="Ενότητα 5-1"
             >next</a> |</li>
        <li class="right" >
          <a href="module1.html" title="Ενότητα 4-1"
             >previous</a> |</li>
        <li><a href="../index.html">C++ Lectures v1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2009, mistral.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.2.
    </div>
  </body>
</html>