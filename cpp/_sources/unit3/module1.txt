Ενότητα 3-1
============

Παράδειγμα: Calculator με χειρισμό σφαλμάτων εισόδου
-------------------------------------------------------

Ο χειρισμός βέβαια είναι "ωμός": δεν ελέγχουμε τι είδους σφάλμα συνέβη, αν π.χ. ο χρήστης έδωσε EOF θέλοντας να διακόψει! Εδώ επιμένουμε μέχρι την εισαγωγή αριθμού.

.. literalinclude:: simplecalc2.cpp
   :language: c++

  
Εισαγωγή στις συναρτήσεις
----------------------------
Στο προηγούμενο παράδειγμα του calculator ο κώδικας ελέγχου του cin επαναλαμβάνεται. Μπορούμε να τοποθετήσουμε τον κοινό αυτόν κώδικα μέσα σε μια συνάρτηση.

Η συνάρτηση αυτη θα δέχεται ως είσοδο 2 ορίσματα (arguments): το κείμενο που θα προτρέπει τον χρήστη να εισάγει δεδομένα (prompt) και το μήνυμα σε περίπτωση λανθασμένης εισόδου (errormsg). Η συνάρτηση θα επιστρέφει μόνο όταν ο χρήστης εισάγει έναν έγκυρο αριθμό. 

.. literalinclude:: simplecalc3.cpp
   :language: c++
      

Ο σχετικός με τη συνάρτηση κώδικας εμφανίζεται σε 3 σημεία:

  1. Πριν την main(), υπάρχει η δήλωση (function prototype) της συνάρτησης, με τον τύπο που επιστρέφει και τα ορίσματα εισόδου που δέχεται. Ο μεταγλωττιστής πρέπει να ξέρει πώς θα χρησιμοποιήσει τη συνάρτηση στη συνέχεια. Παρατηρήστε το τελικό ;

  .. code-block:: c++

     double getdouble(const string&,const string&);  
    
  2. Μέσα στη main, καλούμε τη συνάρτηση

  .. code-block:: c++

     d1 = getdouble("A:","wrong input!");
  
     d2 = getdouble("B:","wrong input!");
     
  3. Στο τέλος του κώδικα υπάρχει ο ορισμός του κώδικα της συνάρτησης
  
  .. code-block:: c++
  
     double getdouble(const string& prompt,const string& errormsg) {
       double d;

       cout << prompt;
       while (!(cin >> d)) {	
         cin.clear(); // clear error state
         cin.ignore(numeric_limits<streamsize>::max(),'\n');
         cout << errormsg << endl << prompt;    
       }
 
       return d; 
     } 
     
.. note::

   Τα ορίσματα εισόδου στη συνάρτηση είναι τύπου **const string&**, δηλαδή αναφορές σε string και μάλιστα const (δεν επιτρέπεται η συνάρτηση να αλλάξει το περιεχόμενό τους). Περισσότερα για όλα αυτά στη συνέχεια! 
