<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Ενότητα 2-2 &mdash; C++ Lectures v1.0 documentation</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="C++ Lectures v1.0 documentation" href="../index.html" />
    <link rel="next" title="Ενότητα 3-1" href="../unit3/module1.html" />
    <link rel="prev" title="Ενότητα 2-1" href="module1.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../unit3/module1.html" title="Ενότητα 3-1"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="module1.html" title="Ενότητα 2-1"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">C++ Lectures v1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="document">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="id1">
<h1>Ενότητα 2-2<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="i-o-errors">
<h2>Ανίχνευση σφαλμάτων Εισόδου-Εξόδου (I/O Errors)<a class="headerlink" href="#i-o-errors" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Γενικότερα για <em>streams</em> εισόδου εξόδου (π.χ. σε αρχεία), τα <strong>cin</strong> και <strong>cout</strong> είναι μια μόνο περίπτωση προκαθορισμένων streams.</p>
</li>
<li><p class="first">Status bits</p>
<p><a class="reference external" href="http://www.cplusplus.com/reference/iostream/ios_base/iostate/">http://www.cplusplus.com/reference/iostream/ios_base/iostate/</a></p>
<ul class="simple">
<li><em>goodbit</em> - το stream σε κατάσταση επιτυχίας</li>
<li><em>failbit</em> - αποτυχία, &quot;δεν μπορώ να εκτελέσω τη λειτουργία που ζητήθηκε&quot;</li>
<li><em>badbit</em> - σοβαρή αποτυχία, &quot;η συσκευή εισόδου/εξόδου δεν λειτουργεί σωστά&quot;</li>
<li><em>eofbit</em> - end of file (EOF), &quot;δεν υπάρχουν άλλα δεδομένα&quot; (δεν είναι κατ'ανάγκη κατάσταση σφάλματος!)</li>
</ul>
</li>
<li><p class="first">Έλεγχος κατάστασης - συναρτήσεις αντικειμένων stream</p>
<ul class="simple">
<li><em>good()</em> - αληθές αν το stream σε κατάσταση επιτυχίας</li>
<li><em>fail()</em> - αληθές αν έχει τεθεί το failbit ή το badbit</li>
<li><em>bad()</em> - αληθές αν έχει τεθεί το badbit</li>
<li><em>eof()</em> - αληθές αν έχει τεθεί το eofbit</li>
</ul>
</li>
<li><p class="first">Όταν συμβεί ένα σφάλμα, το stream <strong>παραμένει στην κατάσταση αυτή</strong> έως ότου ζητηθεί από το πρόγραμμα η επαναφορά στην κατάσταση good (εάν αυτό είναι φυσικά δυνατό) μέσω της μεθόδου <strong>clear()</strong>.</p>
</li>
<li><p class="first">Σε περίπτωση που ο χρήστης έχει εισάγει μη αποδεκτούς χαρακτήρες, π.χ. γράμματα κατά την ανάγνωση αριθμού απο stream εισόδου, πρέπει να απομακρύνουμε τους χαρακτήρες αυτούς από το stream πριν επιχειρήσουμε νέα ανάγνωση (μέθοδος <strong>ignore()</strong>).</p>
</li>
</ul>
</div>
<div class="section" id="stream-cin">
<h2>Χειρισμός σφαλμάτων στο stream cin<a class="headerlink" href="#stream-cin" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Μέσω των συναρτήσεων ελέγχου κατάστασης</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">d1</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="n">cin</span><span class="p">.</span><span class="n">fail</span><span class="p">())</span> <span class="p">{</span>
  <span class="n">cin</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span> <span class="c1">// clear error state</span>
  <span class="c1">// extract a number of characters, or until \n is met - remove this \n, too</span>
  <span class="n">cin</span><span class="p">.</span><span class="n">ignore</span><span class="p">(</span><span class="n">numeric_limits</span><span class="o">&lt;</span><span class="n">streamsize</span><span class="o">&gt;::</span><span class="n">max</span><span class="p">(),</span><span class="sc">&#39;\n&#39;</span><span class="p">);</span>      <span class="c1">// include &lt;limits&gt; to use this</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;wrong input!&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">Δοκιμή του ίδιου του cin μέσα σε συνθήκη - <strong>πιο σύνηθες</strong></p>
<div class="highlight-c++"><div class="highlight"><pre><span class="c1">// !cin indicates an error condition (any kind of error actually, but here we don&#39;t care)</span>
<span class="c1">// this is due to the special evaluation of cin when used in a condition:</span>
<span class="c1">// if fail() is true, cin returns a zero pointer (evaluated to false)</span>

<span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">d2</span><span class="p">))</span> <span class="p">{</span>
  <span class="n">cin</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span> <span class="c1">// clear error state</span>
  <span class="n">cin</span><span class="p">.</span><span class="n">ignore</span><span class="p">(</span><span class="n">numeric_limits</span><span class="o">&lt;</span><span class="n">streamsize</span><span class="o">&gt;::</span><span class="n">max</span><span class="p">(),</span><span class="sc">&#39;\n&#39;</span><span class="p">);</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;wrong input!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">Σχετικό με το προηγούμενο: &quot;διάβασε αριθμούς από ένα stream μέχρι να μην υπάρχουν άλλοι&quot;</p>
<p>(για την ακρίβεια: &quot;μέχρι να συμβεί ένα σφάλμα ή μέχρι το EOF&quot;)</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

<span class="c1">// read integers from cin until no more input</span>
<span class="k">while</span> <span class="p">(</span><span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// do something with input</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../unit3/module1.html" title="Ενότητα 3-1"
             >next</a> |</li>
        <li class="right" >
          <a href="module1.html" title="Ενότητα 2-1"
             >previous</a> |</li>
        <li><a href="../index.html">C++ Lectures v1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2009, mistral.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.2.
    </div>
  </body>
</html>